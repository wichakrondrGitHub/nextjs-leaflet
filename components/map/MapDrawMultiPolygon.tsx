"use client";
import React, { useState } from "react";
import { FeatureGroup, GeoJSON, MapContainer, TileLayer } from "react-leaflet";
import { EditControl } from "react-leaflet-draw";

import "leaflet-editable";
import OpacityControl from "./tools/OpacityControl";
import Control from "react-leaflet-custom-control";
const MyMap = () => {
  const [geoJSON, setGeoJSON] = useState({
    type: "FeatureCollection",
    name: "cnc0ip7aftm3e7961oj0",
    path_name: "multipoly_04",
    unique_field: "",
    crs: {
      type: null,
      properties: null,
    },
    features: [
      {
        type: "Feature",
        properties: {
          "&_log": "",
          "&_centroid": [102.22987202566398, 14.177964728392135],
          "&_amerers": 273373342.2499876,
          "&_lzl": "",
          "&_lzpl": "",
          "&_lol": "",
          id: "1",
          "&_lzc": "",
          "&_akil": 273.3733422499876,
          "&_arai": 170858.33890624225,
          "&_lzg": "",
          "&_lzpc": "",
          "&_lzpg": "",
          "&_loc": "",
        },
        geometry: {
          coordinates: [
            [
              [
                [102.13046956719037, 14.118274432407908],
                [102.25341287361216, 14.30282472034423],
                [102.33388485599731, 14.11249352447197],
                [102.13046956719037, 14.118274432407908],
              ],
              [
                [102.24707943055407, 14.259138562100306],
                [102.20349044009544, 14.194857591798304],
                [102.27278575826044, 14.191968130387501],
                [102.24707943055407, 14.259138562100306],
              ],
              [
                [102.26235420498827, 14.172102085987946],
                [102.22509865758775, 14.130919656992809],
                [102.29923719691482, 14.126945519229634],
                [102.26235420498827, 14.172102085987946],
              ],
            ],
          ],
          type: "MultiPolygon",
        },
      },
      {
        type: "Feature",
        properties: {
          "&_lzl": "ประเทศไทย",
          "&_lzg": "THAILAND",
          "&_lzpl": "ภาคตะวันออกเฉียง",
          "&_lol": "จังหวัดนครราชสีมา",
          "&_centroid": [102.24074599071832, 14.215202843568706],
          "&_akil": 4.194180144495726,
          id: "2",
          "&_amerers": 4194180.1444957256,
          "&_log": "NAKHON RATCHASIMA PROVINCE",
          "&_lzc": "TH",
          "&_lzpg": "NORTHEASTERN",
          "&_lzpc": "TH5",
          "&_loc": "TH30",
          "&_arai": 2621.3625903098286,
        },
        geometry: {
          coordinates: [
            [
              [
                [102.22770654590579, 14.207498552012922],
                [102.24149109844396, 14.232417233579074],
                [102.25304031813815, 14.205692743768207],
                [102.22770654590579, 14.207498552012922],
              ],
            ],
          ],
          type: "MultiPolygon",
        },
      },
      {
        type: "Feature",
        properties: {
          "&_loc": "TH30",
          "&_centroid": [102.25937370501438, 14.144286472559545],
          "&_akil": 4.207283796574424,
          "&_lzl": "ประเทศไทย",
          "&_lzpc": "TH5",
          "&_lzpl": "ภาคตะวันออกเฉียง",
          "&_amerers": 4207283.796574424,
          "&_lol": "จังหวัดนครราชสีมา",
          "&_lzc": "TH",
          "&_lzg": "THAILAND",
          "&_lzpg": "NORTHEASTERN",
          "&_log": "NAKHON RATCHASIMA PROVINCE",
          id: "3",
          "&_arai": 2629.552372859015,
        },
        geometry: {
          coordinates: [
            [
              [
                [102.25937376119623, 14.154324073010786],
                [102.2595485380981, 14.154327932108423],
                [102.25972335569472, 14.154328748180607],
                [102.25989816100825, 14.154326520980034],
                [102.26007290106459, 14.154321251181647],
                [102.26024752290937, 14.154312940382441],
                [102.2604219736241, 14.154301591100973],
                [102.26059620034214, 14.1542872067766],
                [102.26077015026468, 14.154269791768439],
                [102.26094377067685, 14.154249351354046],
                [102.26111700896361, 14.154225891727815],
                [102.26128981262572, 14.154199419999099],
                [102.26146212929567, 14.154169944190059],
                [102.26163390675352, 14.154137473233234],
                [102.26180509294272, 14.154102016968828],
                [102.26197563598595, 14.154063586141731],
                [102.26214548420073, 14.15402219239827],
                [102.26231458611518, 14.153977848282663],
                [102.2624828904836, 14.153930567233237],
                [102.26265034630194, 14.153880363578342],
                [102.26281690282333, 14.15382725253201],
                [102.26298250957343, 14.153771250189353],
                [102.26314711636572, 14.153712373521676],
                [102.26331067331668, 14.15365064037134],
                [102.263473130861, 14.153586069446352],
                [102.26363443976652, 14.153518680314695],
                [102.26379455114913, 14.1534484933984],
                [102.26395341648768, 14.15337552996736],
                [102.2641109876386, 14.153299812132873],
                [102.26426721685053, 14.153221362840956],
                [102.26442205677877, 14.15314020586538],
                [102.26457546049964, 14.153056365800474],
                [102.26472738152471, 14.152969868053663],
                [102.26487777381486, 14.152880738837775],
                [102.26502659179425, 14.152789005163093],
                [102.26517379036414, 14.152694694829178],
                [102.26531932491655, 14.152597836416428],
                [102.26546315134773, 14.152498459277437],
                [102.26560522607163, 14.152396593528085],
                [102.26574550603301, 14.152292270038416],
                [102.26588394872054, 14.152185520423284],
                [102.26602051217967, 14.152076377032772],
                [102.26615515502534, 14.151964872942388],
                [102.26628783645452, 14.151851041943042],
                [102.26641851625858, 14.151734918530803],
                [102.26654715483551, 14.15161653789645],
                [102.26667371320183, 14.1514959359148],
                [102.26679815300447, 14.151373149133851],
                [102.26692043653246, 14.151248214763687],
                [102.26704052672815, 14.151121170665215],
                [102.2671583871987, 14.150992055338687],
                [102.2672739822269, 14.150860907912033],
                [102.2673872767821, 14.150727768129004],
                [102.26749823653078, 14.150592676337128],
                [102.26760682784702, 14.15045567347548],
                [102.2677130178226, 14.150316801062282],
                [102.26781677427704, 14.150176101182309],
                [102.26791806576732, 14.15003361647415],
                [102.26801686159742, 14.14988939011728],
                [102.26811313182763, 14.14974346581897],
                [102.26820684728361, 14.149595887801048],
                [102.2682979795652, 14.149446700786497],
                [102.26838650105515, 14.149295949985897],
                [102.26847238492729, 14.14914368108373],
                [102.26855560515486, 14.148989940224537],
                [102.26863613651825, 14.14883477399892],
                [102.26871395461274, 14.148678229429446],
                [102.26878903585582, 14.148520353956375],
                [102.26886135749442, 14.148361195423293],
                [102.26893089761171, 14.148200802062618],
                [102.26899763513381, 14.148039222480971],
                [102.26906154983618, 14.147876505644462],
                [102.26912262234967, 14.147712700863831],
                [102.26918083416649, 14.147547857779525],
                [102.26923616764577, 14.147382026346639],
                [102.26928860601889, 14.147215256819786],
                [102.26933813339458, 14.147047599737867],
                [102.26938473476378, 14.146879105908749],
                [102.26942839600409, 14.146709826393874],
                [102.26946910388413, 14.146539812492783],
                [102.26950684606754, 14.146369115727573],
                [102.26954161111668, 14.146197787827278],
                [102.26957338849614, 14.146025880712191],
                [102.26960216857587, 14.145853446478142],
                [102.2696279426342, 14.145680537380699],
                [102.26965070286039, 14.145507205819332],
                [102.26967044235703, 14.145333504321544],
                [102.26968715514212, 14.14515948552694],
                [102.26970083615096, 14.14498520217128],
                [102.26971148123752, 14.144810707070508],
                [102.26971908717589, 14.144636053104726],
                [102.26972365166107, 14.144461293202184],
                [102.26972517330985, 14.144286480323235],
                [102.26972365166107, 14.144111667444285],
                [102.26971908717589, 14.143936907541743],
                [102.26971148123752, 14.14376225357596],
                [102.26970083615096, 14.143587758475189],
                [102.26968715514212, 14.14341347511953],
                [102.26967044235703, 14.143239456324926],
                [102.26965070286039, 14.143065754827138],
                [102.2696279426342, 14.14289242326577],
                [102.26960216857587, 14.142719514168327],
                [102.26957338849614, 14.142547079934278],
                [102.26954161111668, 14.142375172819191],
                [102.26950684606754, 14.142203844918896],
                [102.26946910388413, 14.142033148153686],
                [102.26942839600409, 14.141863134252596],
                [102.26938473476378, 14.14169385473772],
                [102.26933813339458, 14.141525360908602],
                [102.26928860601889, 14.141357703826683],
                [102.26923616764577, 14.14119093429983],
                [102.26918083416649, 14.141025102866944],
                [102.26912262234967, 14.140860259782638],
                [102.26906154983618, 14.140696455002008],
                [102.26899763513381, 14.140533738165498],
                [102.26893089761171, 14.140372158583851],
                [102.26886135749442, 14.140211765223176],
                [102.26878903585582, 14.140052606690094],
                [102.26871395461274, 14.139894731217023],
                [102.26863613651825, 14.139738186647548],
                [102.26855560515486, 14.139583020421933],
                [102.26847238492729, 14.139429279562739],
                [102.26838650105515, 14.139277010660573],
                [102.2682979795652, 14.139126259859973],
                [102.26820684728361, 14.138977072845421],
                [102.26811313182763, 14.1388294948275],
                [102.26801686159742, 14.138683570529189],
                [102.26791806576732, 14.138539344172319],
                [102.26781677427704, 14.13839685946416],
                [102.2677130178226, 14.138256159584188],
                [102.26760682784702, 14.138117287170989],
                [102.26749823653078, 14.137980284309341],
                [102.2673872767821, 14.137845192517466],
                [102.2672739822269, 14.137712052734436],
                [102.2671583871987, 14.137580905307782],
                [102.26704052672815, 14.137451789981254],
                [102.26692043653244, 14.137324745882783],
                [102.26679815300447, 14.137199811512618],
                [102.26667371320183, 14.137077024731669],
                [102.26654715483551, 14.13695642275002],
                [102.26641851625858, 14.136838042115667],
                [102.26628783645452, 14.136721918703428],
                [102.26615515502534, 14.136608087704081],
                [102.26602051217967, 14.136496583613697],
                [102.26588394872054, 14.136387440223185],
                [102.26574550603301, 14.136280690608054],
                [102.26560522607163, 14.136176367118384],
                [102.26546315134773, 14.136074501369032],
                [102.26531932491655, 14.135975124230042],
                [102.26517379036414, 14.135878265817292],
                [102.26502659179425, 14.135783955483376],
                [102.26487777381486, 14.135692221808695],
                [102.26472738152471, 14.135603092592806],
                [102.26457546049964, 14.135516594845996],
                [102.26442205677877, 14.135432754781089],
                [102.26426721685053, 14.135351597805514],
                [102.2641109876386, 14.135273148513596],
                [102.26395341648768, 14.13519743067911],
                [102.26379455114913, 14.135124467248069],
                [102.26363443976652, 14.135054280331774],
                [102.263473130861, 14.134986891200118],
                [102.26331067331668, 14.134922320275129],
                [102.26314711636572, 14.134860587124793],
                [102.26298250957343, 14.134801710457117],
                [102.26281690282333, 14.13474570811446],
                [102.26265034630194, 14.134692597068128],
                [102.2624828904836, 14.134642393413232],
                [102.26231458611518, 14.134595112363806],
                [102.26214548420073, 14.1345507682482],
                [102.26197563598595, 14.134509374504738],
                [102.26180509294272, 14.134470943677641],
                [102.26163390675352, 14.134435487413235],
                [102.26146212929567, 14.13440301645641],
                [102.26128981262572, 14.13437354064737],
                [102.26111700896361, 14.134347068918654],
                [102.26094377067685, 14.134323609292423],
                [102.26077015026468, 14.13430316887803],
                [102.26059620034214, 14.13428575386987],
                [102.2604219736241, 14.134271369545496],
                [102.26024752290937, 14.134260020264028],
                [102.26007290106459, 14.134251709464822],
                [102.25989816100825, 14.134246439666436],
                [102.25972335569472, 14.134244212465862],
                [102.2595485380981, 14.134245028538047],
                [102.25937376119623, 14.134248887635684],
                [102.25919898429436, 14.134245028538048],
                [102.25902416669774, 14.134244212465862],
                [102.25884936138421, 14.134246439666436],
                [102.25867462132787, 14.134251709464822],
                [102.25849999948309, 14.13426002026403],
                [102.25832554876835, 14.134271369545498],
                [102.25815132205032, 14.134285753869872],
                [102.25797737212778, 14.134303168878033],
                [102.25780375171561, 14.134323609292425],
                [102.25763051342886, 14.134347068918657],
                [102.25745770976674, 14.134373540647372],
                [102.2572853930968, 14.134403016456412],
                [102.25711361563894, 14.134435487413239],
                [102.25694242944974, 14.134470943677645],
                [102.25677188640651, 14.134509374504741],
                [102.25660203819174, 14.134550768248204],
                [102.25643293627728, 14.13459511236381],
                [102.25626463190886, 14.134642393413236],
                [102.25609717609052, 14.134692597068131],
                [102.25593061956913, 14.134745708114464],
                [102.25576501281903, 14.13480171045712],
                [102.25560040602676, 14.134860587124797],
                [102.25543684907578, 14.134922320275134],
                [102.25527439153146, 14.134986891200121],
                [102.25511308262595, 14.13505428033178],
                [102.25495297124333, 14.135124467248072],
                [102.25479410590478, 14.135197430679115],
                [102.25463653475387, 14.135273148513601],
                [102.25448030554193, 14.135351597805519],
                [102.2543254656137, 14.135432754781093],
                [102.25417206189283, 14.135516594846],
                [102.25402014086775, 14.135603092592811],
                [102.2538697485776, 14.1356922218087],
                [102.2537209305982, 14.135783955483381],
                [102.25357373202831, 14.135878265817297],
                [102.25342819747593, 14.135975124230047],
                [102.25328437104473, 14.136074501369038],
                [102.25314229632083, 14.13617636711839],
                [102.25300201635946, 14.136280690608059],
                [102.25286357367193, 14.13638744022319],
                [102.2527270102128, 14.136496583613702],
                [102.25259236736713, 14.136608087704087],
                [102.25245968593795, 14.136721918703433],
                [102.25232900613388, 14.136838042115672],
                [102.25220036755697, 14.136956422750025],
                [102.25207380919065, 14.137077024731674],
                [102.25194936938799, 14.137199811512623],
                [102.25182708586001, 14.137324745882788],
                [102.2517069956643, 14.13745178998126],
                [102.25158913519377, 14.137580905307788],
                [102.25147354016556, 14.137712052734441],
                [102.25136024561037, 14.137845192517469],
                [102.25124928586169, 14.137980284309347],
                [102.25114069454544, 14.138117287170994],
                [102.25103450456987, 14.138256159584193],
                [102.25093074811542, 14.138396859464166],
                [102.25082945662515, 14.138539344172322],
                [102.25073066079504, 14.138683570529194],
                [102.25063439056484, 14.138829494827505],
                [102.25054067510887, 14.138977072845426],
                [102.25044954282727, 14.139126259859978],
                [102.25036102133733, 14.139277010660578],
                [102.25027513746518, 14.139429279562743],
                [102.25019191723761, 14.139583020421938],
                [102.25011138587422, 14.139738186647552],
                [102.25003356777974, 14.139894731217026],
                [102.24995848653664, 14.140052606690098],
                [102.24988616489806, 14.14021176522318],
                [102.24981662478076, 14.140372158583855],
                [102.24974988725866, 14.1405337381655],
                [102.24968597255629, 14.140696455002011],
                [102.2496249000428, 14.140860259782642],
                [102.24956668822598, 14.141025102866948],
                [102.2495113547467, 14.141190934299834],
                [102.24945891637358, 14.141357703826685],
                [102.24940938899789, 14.141525360908606],
                [102.2493627876287, 14.141693854737724],
                [102.24931912638839, 14.141863134252597],
                [102.24927841850834, 14.142033148153688],
                [102.24924067632493, 14.142203844918898],
                [102.2492059112758, 14.142375172819193],
                [102.24917413389635, 14.14254707993428],
                [102.2491453538166, 14.142719514168327],
                [102.24911957975827, 14.142892423265772],
                [102.24909681953208, 14.143065754827138],
                [102.24907708003545, 14.143239456324928],
                [102.24906036725035, 14.143413475119532],
                [102.24904668624151, 14.143587758475189],
                [102.24903604115495, 14.14376225357596],
                [102.24902843521659, 14.143936907541743],
                [102.2490238707314, 14.144111667444285],
                [102.24902234908262, 14.144286480323235],
                [102.2490238707314, 14.144461293202184],
                [102.24902843521659, 14.144636053104726],
                [102.24903604115495, 14.144810707070508],
                [102.24904668624151, 14.14498520217128],
                [102.24906036725035, 14.145159485526937],
                [102.24907708003545, 14.145333504321542],
                [102.24909681953208, 14.145507205819332],
                [102.24911957975827, 14.145680537380697],
                [102.2491453538166, 14.14585344647814],
                [102.24917413389635, 14.14602588071219],
                [102.2492059112758, 14.146197787827276],
                [102.24924067632493, 14.146369115727571],
                [102.24927841850834, 14.146539812492781],
                [102.24931912638839, 14.146709826393872],
                [102.2493627876287, 14.146879105908745],
                [102.24940938899789, 14.147047599737864],
                [102.24945891637358, 14.147215256819784],
                [102.2495113547467, 14.147382026346635],
                [102.24956668822598, 14.147547857779522],
                [102.2496249000428, 14.147712700863828],
                [102.24968597255629, 14.147876505644458],
                [102.24974988725866, 14.14803922248097],
                [102.24981662478076, 14.148200802062615],
                [102.24988616489806, 14.14836119542329],
                [102.24995848653664, 14.148520353956371],
                [102.25003356777974, 14.148678229429443],
                [102.25011138587422, 14.148834773998917],
                [102.25019191723761, 14.148989940224531],
                [102.25027513746518, 14.149143681083727],
                [102.25036102133733, 14.149295949985891],
                [102.25044954282727, 14.149446700786491],
                [102.25054067510887, 14.149595887801043],
                [102.25063439056484, 14.149743465818965],
                [102.25073066079504, 14.149889390117275],
                [102.25082945662515, 14.150033616474147],
                [102.25093074811542, 14.150176101182304],
                [102.25103450456987, 14.150316801062276],
                [102.25114069454544, 14.150455673475475],
                [102.25124928586169, 14.150592676337123],
                [102.25136024561037, 14.150727768129],
                [102.25147354016556, 14.150860907912028],
                [102.25158913519377, 14.150992055338682],
                [102.2517069956643, 14.15112117066521],
                [102.25182708586001, 14.151248214763681],
                [102.25194936938799, 14.151373149133846],
                [102.25207380919065, 14.151495935914795],
                [102.25220036755697, 14.151616537896444],
                [102.25232900613388, 14.151734918530797],
                [102.25245968593795, 14.151851041943036],
                [102.25259236736713, 14.151964872942383],
                [102.2527270102128, 14.152076377032767],
                [102.25286357367193, 14.152185520423279],
                [102.25300201635946, 14.15229227003841],
                [102.25314229632083, 14.15239659352808],
                [102.25328437104473, 14.152498459277432],
                [102.25342819747593, 14.152597836416422],
                [102.25357373202831, 14.152694694829172],
                [102.2537209305982, 14.152789005163088],
                [102.2538697485776, 14.15288073883777],
                [102.25402014086775, 14.152969868053658],
                [102.25417206189283, 14.153056365800468],
                [102.2543254656137, 14.153140205865377],
                [102.25448030554193, 14.15322136284095],
                [102.25463653475387, 14.153299812132868],
                [102.25479410590478, 14.153375529967354],
                [102.25495297124333, 14.153448493398397],
                [102.25511308262595, 14.15351868031469],
                [102.25527439153146, 14.153586069446348],
                [102.25543684907578, 14.153650640371335],
                [102.25560040602676, 14.153712373521673],
                [102.25576501281903, 14.15377125018935],
                [102.25593061956913, 14.153827252532006],
                [102.25609717609052, 14.153880363578338],
                [102.25626463190886, 14.153930567233234],
                [102.25643293627728, 14.15397784828266],
                [102.25660203819174, 14.154022192398266],
                [102.25677188640651, 14.154063586141728],
                [102.25694242944974, 14.154102016968825],
                [102.25711361563894, 14.15413747323323],
                [102.2572853930968, 14.154169944190057],
                [102.25745770976674, 14.154199419999097],
                [102.25763051342886, 14.154225891727812],
                [102.25780375171561, 14.154249351354045],
                [102.25797737212778, 14.154269791768437],
                [102.25815132205032, 14.154287206776598],
                [102.25832554876835, 14.154301591100971],
                [102.25849999948309, 14.15431294038244],
                [102.25867462132787, 14.154321251181647],
                [102.25884936138421, 14.154326520980034],
                [102.25902416669774, 14.154328748180607],
                [102.25919898429436, 14.154327932108421],
                [102.25937376119623, 14.154324073010786],
              ],
            ],
          ],
          type: "MultiPolygon",
        },
      },
    ],
  });
  return (
    <MapContainer
      center={[14.172102085987946, 102.26235420498827]}
      zoom={13}
      style={{ height: "500px", width: "100%" }}
    >
      <TileLayer
        url="https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"
        attribution='&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
      />
      <FeatureGroup>
        <EditControl
          position="topright"
          draw={{
            polygon: {
              allowIntersection: false,
              drawError: {
                color: "#e1e100",
                message: "<strong>Error:</strong> Shape edges cannot cross!",
              },
              shapeOptions: {
                color: "#97009c",
              },
              showArea: true,
              metric: false,
              repeatMode: true,
            },
          }}
        />
        {/* {geoJSON && (
          <GeoJSON
            data={geoJSON}
            ref={geoJSON}
            pathOptions={{
              color: 'white',
              fillColor: '#F28F3B',
              fillOpacity: 0.7,
              opacity: 1,
              weight: 1,
            }}
            // onEachFeature={(feature, layer) => {
            //   layer.bindPopup(
            //     "<img src='https://www.w3schools.com/images/lamp.jpg" +
            //       "' width='259'/><br><b>Name: </b>" +
            //       feature.properties.name +
            //       '<br><b>Description: </b>' +
            //       feature.properties.description
            //   )
            //   layer.on({
            //     mouseover: function (e) {
            //       const auxLayer = e.target
            //       auxLayer.setStyle({
            //         weight: 4,
            //       })
            //     },
            //     mouseout: function (e) {
            //       const auxLayer = e.target
            //       auxLayer.setStyle({
            //         weight: 1,

            //         dashArray: '',
            //         fillOpacity: 0.7,
            //         opacity: 1,
            //       })
            //       // layer
            //       //   .bindPopup(
            //       //     "<img src='https://www.w3schools.com/images/lamp.jpg" +
            //       //       "' width='259'/><br><b>Name: </b>" +
            //       //       feature.properties.name +
            //       //       '<br><b>Description: </b>' +
            //       //       feature.properties.description
            //       //   )
            //       //   .openPopup()
            //     },
            //   })
            // }}
            attribution="&copy; credits due..."
          />
        )} */}
        <OpacityControl
          geojsonFeature={{
            type: "",
            features: [],
          }}
        />
      </FeatureGroup>
      <Control position="topleft">
        {
          <OpacityControl
            geojsonFeature={{
              type: "",
              features: [],
            }}
          />
        }
      </Control>
    </MapContainer>
  );
};

export default MyMap;
